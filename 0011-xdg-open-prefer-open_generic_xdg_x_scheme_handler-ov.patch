From 338f54e0dbf3d9e9583f34c9dde194c39ba0b4e8 Mon Sep 17 00:00:00 2001
From: Rex Dieter <rdieter@math.unl.edu>
Date: Fri, 10 Jun 2016 07:27:03 -0500
Subject: [PATCH] xdg-open: prefer open_generic_xdg_x_scheme_handler over
 open_envvar(BR96472)

---
 ChangeLog           | 3 +++
 scripts/xdg-open.in | 8 ++++----
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index aca24ed..f413aa0 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,5 +1,8 @@
 === xdg-utils 1.1.2 (unreleased) ===
 
+2016-06-10 Rex Dieter <rdieter@fedoraproject.org>
+   * xdg-open: prefer open_generic_xdg_x_scheme_handler over open_envvar (BR96472)
+
 2016-05-20 Rex Dieter <rdieter@fedoraproject.org>
    * xdg-mime: ensure check_mimeapps_list returns only primary item (BR44163)
 
diff --git a/scripts/xdg-open.in b/scripts/xdg-open.in
index fccb9bd..cb41ac6 100644
--- a/scripts/xdg-open.in
+++ b/scripts/xdg-open.in
@@ -380,14 +380,14 @@ open_generic()
         fi
     fi
 
-    if [ -n "$BROWSER" ]; then
-        open_envvar "$1"
-    fi
-
     if has_display; then
         open_generic_xdg_x_scheme_handler "$1"
     fi
 
+    if [ -n "$BROWSER" ]; then
+        open_envvar "$1"
+    fi
+
     # if BROWSER variable is not set, check some well known browsers instead
     if [ x"$BROWSER" = x"" ]; then
         BROWSER=www-browser:links2:elinks:links:lynx:w3m
-- 
1.9.5

